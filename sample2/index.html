<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css" />
  </head>
  <body>
    <div id="wrap">
      <div class="con-box">
        <p class="btn">
          <button class="all-del">명단 삭제</button>
          <button class="all-reset">명단 보기</button>
        </p>
        <div class="people-list">
          <!-- <ul class="people">
            <li class="img"><img src="image/hijab-3064633_640.jpg" alt=""></li>
            <li class="info">
              <p class="name">홍길동</p>
              <p class="job">웹퍼블리셔</p>
              <p class="tel">010-0000-1111</p>
            </li>
            <li class="Favorites"><i class="xi-star"></i></li>
          </ul> -->
        </div>
      </div>
    </div>
    <script type="module">
      import peopleObj from "./module/data.js";
      const allDelBtn = document.querySelector(".all-del");
      const allResetBtn = document.querySelector(".all-reset");
      const peopleList = document.querySelector(".people-list");

      const makeList = () => {
        const newObj = peopleObj.map(people => {
          let { imgurl, name, job, tel, favorite } = people;
          if (people.favorite) {
            favorite = "xi-star";
          } else {
            favorite = "xi-star-o";
          }
          peopleList.innerHTML += `
        <ul class="people">
            <li class="img"><img src="${imgurl}" alt=${name}></li>
            <li class="info">
              <p class="name">${name}</p>
              <p class="job">${job}</p>
              <p class="tel">${tel}</p>
            </li>
            <li class="Favorites"><i class=${favorite}></i></li>
          </ul>
        `;
        });
      };
      makeList();
      const Favorites = document.querySelectorAll(".Favorites i");
      Favorites.forEach(star => {
        star.addEventListener("click", e => {
          if (e.currentTarget.classList.contains("xi-star")) {
            e.currentTarget.classList.replace("xi-star", "xi-star-o");
          } else {
            e.currentTarget.classList.replace("xi-star-o", "xi-star");
          }
        });
      });
      allDelBtn.addEventListener("click", () => {
        peopleList.innerHTML = "";
      });
      allResetBtn.addEventListener("click", () => {
        peopleList.innerHTML = "";
        makeList();
      });
    </script>
  </body>
</html>
